<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azure Logic App Trigger Test</title>
</head>
<body>
    <h1>Azure Logic App Trigger Test</h1>

    <button id="triggerButton">Trigger Logic App</button>
    <p id="response"></p>

    <script>
        const triggerButton = document.getElementById('triggerButton');
        const responseDisplay = document.getElementById('response');

        // Your Logic App trigger URL
        const logicAppUrl = "https://prod-30.southindia.logic.azure.com:443/workflows/f6ad47edbaaf42b0a3b6e4816d8fbb73/triggers/When_a_HTTP_request_is_received/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2FWhen_a_HTTP_request_is_received%2Frun&sv=1.0&sig=c8sFzIKpt9E-VoiCZ46VuTosaiSZjQL0JkzmrxUWkV0";

        triggerButton.addEventListener('click', async () => {
            try {
                const response = await fetch(logicAppUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        "message": "Hello from the web UI"
                    })
                });

                const responseData = await response.json();
                responseDisplay.innerText = `Response: ${JSON.stringify(responseData, null, 2)}`;

                if (response.status === 202) {
                    responseDisplay.innerText += '\nTrigger accepted successfully!';
                } else {
                    responseDisplay.innerText += `\nError: ${response.status} - ${responseData.message || 'Unknown error'}`;
                }
            } catch (error) {
                responseDisplay.innerText = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>
