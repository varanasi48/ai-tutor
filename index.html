async function checkStatus(requestId) {
    try {
        const statusUrl = `https://prod-30.southindia.logic.azure.com/workflows/f6ad47edbaaf42b0a3b6e4816d8fbb73/runs/${requestId}?api-version=2016-10-01&sv=1.0&sig=YOUR_SIGNATURE`;

        console.log("Checking status at:", statusUrl);

        const response = await fetch(statusUrl, {
            method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
        });

        if (response.status === 401) {
            console.error("❌ 401 Unauthorized! Check the signature (sig) in the URL.");
            return;
        }

        const data = await response.json();
        console.log("Polling Response:", data);

        if (data.properties && data.properties.status === "Succeeded") {
            console.log("✅ Final Response Received:", data);
            const answer = data.properties.outputs.answer || "No answer received.";
            document.getElementById("responseText").innerText = answer;
        } else if (data.properties && data.properties.status === "Running") {
            setTimeout(() => checkStatus(requestId), 2000);  // Poll every 2s
        } else {
            document.getElementById("responseText").innerText = "Error: Unexpected response.";
        }
    } catch (error) {
        console.error("❌ Polling error:", error);
        document.getElementById("responseText").innerText = "Error polling response.";
    }
}
